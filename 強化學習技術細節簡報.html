<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¼·åŒ–å­¸ç¿’æ¼”ç®—æ³•æŠ€è¡“å¯¦ç¾è©³è§£</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: #333;
            overflow-x: hidden;
        }

        .presentation-container {
            width: 100vw;
            height: 100vh;
            position: relative;
            overflow: hidden;
        }

        .slide {
            width: 100vw;
            height: 100vh;
            position: absolute;
            top: 0;
            left: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 40px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            transform: translateX(100%);
            transition: transform 0.5s ease-in-out;
            opacity: 0;
        }

        .slide.active {
            transform: translateX(0);
            opacity: 1;
        }

        .slide-title {
            font-size: 3rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 1.5rem;
            background: linear-gradient(45deg, #1e3c72, #2a5298);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .slide-subtitle {
            font-size: 1.3rem;
            color: #666;
            text-align: center;
            margin-bottom: 2rem;
        }

        .content {
            max-width: 1400px;
            width: 100%;
            text-align: center;
        }

        .code-section {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 2rem;
            border-radius: 10px;
            text-align: left;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9rem;
            overflow-x: auto;
            margin: 1rem 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .code-highlight {
            color: #569cd6;
        }

        .code-string {
            color: #ce9178;
        }

        .code-comment {
            color: #6a9955;
        }

        .code-number {
            color: #b5cea8;
        }

        .tech-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin: 2rem 0;
        }

        .tech-card {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .tech-card:hover {
            transform: translateY(-5px);
        }

        .tech-card h3 {
            color: #1e3c72;
            margin-bottom: 1rem;
            font-size: 1.5rem;
        }

        .module-list {
            list-style: none;
            text-align: left;
        }

        .module-list li {
            padding: 0.8rem 0;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .module-list li:last-child {
            border-bottom: none;
        }

        .module-purpose {
            background: #1e3c72;
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            font-size: 0.8rem;
        }

        .algorithm-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin: 2rem 0;
        }

        .algorithm-card {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .algorithm-card h3 {
            color: #1e3c72;
            margin-bottom: 1rem;
            font-size: 1.8rem;
            text-align: center;
        }

        .formula {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 8px;
            font-family: 'Times New Roman', serif;
            font-size: 1.2rem;
            margin: 1rem 0;
            border-left: 4px solid #1e3c72;
        }

        .navigation {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 1rem;
            z-index: 1000;
        }

        .nav-btn {
            background: rgba(255, 255, 255, 0.9);
            border: none;
            padding: 1rem 2rem;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .nav-btn:hover {
            background: #1e3c72;
            color: white;
            transform: translateY(-2px);
        }

        .slide-counter {
            position: fixed;
            top: 30px;
            right: 30px;
            background: rgba(255, 255, 255, 0.9);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-weight: 600;
            z-index: 1000;
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: #e2e8f0;
            border-radius: 3px;
            margin: 1rem 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(45deg, #1e3c72, #2a5298);
            width: 0%;
            transition: width 0.5s ease;
        }

        .implementation-detail {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 10px;
            margin: 1rem 0;
            border-left: 4px solid #1e3c72;
        }

        .implementation-detail h4 {
            color: #1e3c72;
            margin-bottom: 0.5rem;
        }

        @media (max-width: 768px) {
            .slide {
                padding: 20px;
            }
            
            .slide-title {
                font-size: 2rem;
            }
            
            .algorithm-comparison {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="presentation-container">
        <!-- å¹»ç‡ˆç‰‡è¨ˆæ•¸å™¨ -->
        <div class="slide-counter">
            <span id="current-slide">1</span> / <span id="total-slides">10</span>
        </div>

        <!-- å¹»ç‡ˆç‰‡ 1: æ¨™é¡Œé  -->
        <div class="slide active" data-slide="1">
            <div class="content">
                <h1 class="slide-title">ğŸ§  å¼·åŒ–å­¸ç¿’æ¼”ç®—æ³•æŠ€è¡“å¯¦ç¾</h1>
                <p class="slide-subtitle">Q-Learning èˆ‡ SARSA æ ¸å¿ƒå¯¦ä½œè©³è§£</p>
                <div class="tech-grid">
                    <div class="tech-card">
                        <h3>ğŸ¯ æŠ€è¡“é‡é»</h3>
                        <ul class="module-list">
                            <li>æ ¸å¿ƒæ¼”ç®—æ³•å¯¦ä½œ <span class="module-purpose">Q-Learning</span></li>
                            <li>åŒç­–ç•¥å­¸ç¿’ <span class="module-purpose">SARSA</span></li>
                            <li>æ¢ç´¢ç­–ç•¥ <span class="module-purpose">Îµ-greedy</span></li>
                            <li>ç‹€æ…‹ç®¡ç† <span class="module-purpose">Grid World</span></li>
                        </ul>
                    </div>
                    <div class="tech-card">
                        <h3>ğŸ”§ æ ¸å¿ƒæ¨¡çµ„</h3>
                        <ul class="module-list">
                            <li>NumPy <span class="module-purpose">æ•¸å€¼è¨ˆç®—</span></li>
                            <li>Pandas <span class="module-purpose">è³‡æ–™è™•ç†</span></li>
                            <li>JSON <span class="module-purpose">é…ç½®ç®¡ç†</span></li>
                            <li>Matplotlib <span class="module-purpose">è¦–è¦ºåŒ–</span></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- å¹»ç‡ˆç‰‡ 2: æ ¸å¿ƒæ¨¡çµ„èˆ‡ä¾è³´ -->
        <div class="slide" data-slide="2">
            <div class="content">
                <h1 class="slide-title">ğŸ”§ æ ¸å¿ƒæ¨¡çµ„èˆ‡ä¾è³´</h1>
                <div class="tech-grid">
                    <div class="tech-card">
                        <h3>ğŸ“¦ ä¸»è¦ä¾è³´å¥—ä»¶</h3>
                        <div class="code-section">
<span class="code-comment"># æ ¸å¿ƒæ•¸å€¼è¨ˆç®—èˆ‡ç§‘å­¸è¨ˆç®—</span>
<span class="code-highlight">import</span> <span class="code-string">numpy</span> <span class="code-highlight">as</span> np
<span class="code-highlight">import</span> <span class="code-string">pandas</span> <span class="code-highlight">as</span> pd

<span class="code-comment"># æª”æ¡ˆè™•ç†èˆ‡é…ç½®</span>
<span class="code-highlight">import</span> <span class="code-string">json</span>
<span class="code-highlight">import</span> <span class="code-string">os</span>
<span class="code-highlight">import</span> <span class="code-string">argparse</span>
<span class="code-highlight">import</span> <span class="code-string">copy</span>

<span class="code-comment"># è¦–è¦ºåŒ–èˆ‡åˆ†æ</span>
<span class="code-highlight">import</span> <span class="code-string">matplotlib.pyplot</span> <span class="code-highlight">as</span> plt</div>
                    </div>
                    <div class="tech-card">
                        <h3>ğŸ¯ å„æ¨¡çµ„åŠŸèƒ½èªªæ˜</h3>
                        <ul class="module-list">
                            <li><strong>NumPy</strong> <span class="module-purpose">Q-Table é‹ç®—</span></li>
                            <li><strong>Pandas</strong> <span class="module-purpose">è¨“ç·´è¨˜éŒ„è¼¸å‡º</span></li>
                            <li><strong>JSON</strong> <span class="module-purpose">åœ°åœ–èˆ‡è¦å‰‡è¼‰å…¥</span></li>
                            <li><strong>Copy</strong> <span class="module-purpose">åœ°åœ–ç‹€æ…‹è¤‡è£½</span></li>
                            <li><strong>Argparse</strong> <span class="module-purpose">å‘½ä»¤åˆ—åƒæ•¸</span></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- å¹»ç‡ˆç‰‡ 3: ç’°å¢ƒè¨­å®šèˆ‡å¸¸æ•¸ -->
        <div class="slide" data-slide="3">
            <div class="content">
                <h1 class="slide-title">âš™ï¸ ç’°å¢ƒè¨­å®šèˆ‡å¸¸æ•¸å®šç¾©</h1>
                <div class="code-section">
<span class="code-comment"># æ¼”ç®—æ³•åƒæ•¸è¨­å®š</span>
<span class="code-highlight">EPISODES</span> = <span class="code-number">500</span>                    <span class="code-comment"># è¨“ç·´å›åˆæ•¸</span>
<span class="code-highlight">MAX_STEPS</span> = <span class="code-number">100</span>                    <span class="code-comment"># æ¯å›åˆæœ€å¤§æ­¥æ•¸</span>
<span class="code-highlight">LEARNING_RATE</span> = <span class="code-number">0.1</span>                <span class="code-comment"># å­¸ç¿’ç‡ Î±</span>
<span class="code-highlight">DISCOUNT_FACTOR</span> = <span class="code-number">0.95</span>            <span class="code-comment"># æŠ˜æ‰£å› å­ Î³</span>
<span class="code-highlight">EPSILON_START</span> = <span class="code-number">1.0</span>                <span class="code-comment"># åˆå§‹æ¢ç´¢ç‡</span>
<span class="code-highlight">EPSILON_END</span> = <span class="code-number">0.01</span>                  <span class="code-comment"># æœ€çµ‚æ¢ç´¢ç‡</span>
<span class="code-highlight">EPSILON_DECAY</span> = <span class="code-number">0.995</span>              <span class="code-comment"># æ¢ç´¢ç‡è¡°æ¸›å› å­</span>

<span class="code-comment"># å‹•ä½œç©ºé–“å®šç¾©</span>
<span class="code-highlight">ACTIONS</span> = [<span class="code-string">'up'</span>, <span class="code-string">'down'</span>, <span class="code-string">'left'</span>, <span class="code-string">'right'</span>]

<span class="code-comment"># åœ°åœ–å…ƒç´ æ¨™è¨˜</span>
<span class="code-highlight">START</span> = <span class="code-string">'S'</span>      <span class="code-comment"># èµ·é»</span>
<span class="code-highlight">GOAL</span> = <span class="code-string">'G'</span>        <span class="code-comment"># ç›®æ¨™</span>
<span class="code-highlight">REWARD</span> = <span class="code-string">'R'</span>      <span class="code-comment"># çå‹µæ ¼</span>
<span class="code-highlight">TRAP</span> = <span class="code-string">'T'</span>        <span class="code-comment"># é™·é˜±</span>
<span class="code-highlight">OBSTACLE</span> = <span class="code-string">'1'</span>    <span class="code-comment"># éšœç¤™ç‰©</span>
<span class="code-highlight">EMPTY</span> = <span class="code-string">'0'</span>       <span class="code-comment"># ç©ºæ ¼</span></div>
                <div class="implementation-detail">
                    <h4>ğŸ” é—œéµè¨­è¨ˆè€ƒé‡</h4>
                    <p><strong>æ¢ç´¢ç‡è¡°æ¸›</strong>ï¼šä½¿ç”¨æŒ‡æ•¸è¡°æ¸›ç¢ºä¿è¨“ç·´åˆæœŸå……åˆ†æ¢ç´¢ï¼Œå¾ŒæœŸè¶¨å‘åˆ©ç”¨</p>
                    <p><strong>ç‹€æ…‹ç·¨ç¢¼</strong>ï¼šä½ç½®åº§æ¨™è½‰æ›ç‚ºå­—ä¸²æ ¼å¼ï¼Œä¾¿æ–¼ Q-Table ç´¢å¼•</p>
                    <p><strong>å‹•ä½œé©—è­‰</strong>ï¼šç¢ºä¿æ™ºèƒ½é«”ä¸æœƒåŸ·è¡Œç„¡æ•ˆå‹•ä½œ</p>
                </div>
            </div>
        </div>

        <!-- å¹»ç‡ˆç‰‡ 4: Q-Learning æ ¸å¿ƒå…¬å¼ -->
        <div class="slide" data-slide="4">
            <div class="content">
                <h1 class="slide-title">ğŸ§® Q-Learning æ ¸å¿ƒå…¬å¼</h1>
                <div class="algorithm-card">
                    <h3>Q-Learning æ›´æ–°å…¬å¼</h3>
                    <div class="formula">
                        Q(s,a) â† Q(s,a) + Î±[r + Î³Â·max(Q(s',a')) - Q(s,a)]
                    </div>
                    <div class="implementation-detail">
                        <h4>ğŸ“ å…¬å¼è§£æ</h4>
                        <ul>
                            <li><strong>Q(s,a)</strong>ï¼šç•¶å‰ç‹€æ…‹-å‹•ä½œå°çš„ Q å€¼</li>
                            <li><strong>Î±</strong>ï¼šå­¸ç¿’ç‡ï¼Œæ§åˆ¶æ›´æ–°æ­¥é•·</li>
                            <li><strong>r</strong>ï¼šå³æ™‚çå‹µ</li>
                            <li><strong>Î³</strong>ï¼šæŠ˜æ‰£å› å­ï¼Œå¹³è¡¡å³æ™‚èˆ‡æœªä¾†çå‹µ</li>
                            <li><strong>max(Q(s',a'))</strong>ï¼šä¸‹ä¸€ç‹€æ…‹çš„æœ€å¤§ Q å€¼</li>
                        </ul>
                    </div>
                </div>
                <div class="code-section">
<span class="code-comment"># Q-Learning æ ¸å¿ƒæ›´æ–°å‡½æ•¸</span>
<span class="code-highlight">def</span> <span class="code-string">q_learning_update</span>(q_table, state, action, reward, next_state, learning_rate, discount_factor):
    <span class="code-comment">"""Q-Learning æ›´æ–°å‡½æ•¸"""</span>
    current_q = q_table.get((state, action), <span class="code-number">0.0</span>)
    max_next_q = max([q_table.get((next_state, a), <span class="code-number">0.0</span>) <span class="code-highlight">for</span> a <span class="code-highlight">in</span> ACTIONS])
    new_q = current_q + learning_rate * (reward + discount_factor * max_next_q - current_q)
    <span class="code-highlight">return</span> new_q</div>
            </div>
        </div>

        <!-- å¹»ç‡ˆç‰‡ 5: Q-Learning å¯¦ç¾ç´°ç¯€ -->
        <div class="slide" data-slide="5">
            <div class="content">
                <h1 class="slide-title">ğŸ”§ Q-Learning å¯¦ç¾ç´°ç¯€</h1>
                <div class="tech-grid">
                    <div class="tech-card">
                        <h3>ğŸ¯ æ ¸å¿ƒå¯¦ç¾æ­¥é©Ÿ</h3>
                        <div class="code-section">
<span class="code-comment"># 1. åˆå§‹åŒ– Q-Table</span>
q_table = {}
<span class="code-highlight">for</span> i <span class="code-highlight">in</span> range(rows):
    <span class="code-highlight">for</span> j <span class="code-highlight">in</span> range(cols):
        <span class="code-highlight">if</span> map_grid[i][j] != OBSTACLE:
            <span class="code-highlight">for</span> action <span class="code-highlight">in</span> get_valid_actions(map_grid, (i, j)):
                q_table[(i, j, action)] = initial_value

<span class="code-comment"># 2. Îµ-greedy ç­–ç•¥</span>
<span class="code-highlight">if</span> np.random.rand() < current_epsilon:
    action = np.random.choice(valid_actions)  <span class="code-comment"># æ¢ç´¢</span>
<span class="code-highlight">else</span>:
    q_vals = [q_table.get((state[0], state[1], a), -np.inf) <span class="code-highlight">for</span> a <span class="code-highlight">in</span> valid_actions]
    max_q = np.max(q_vals)
    best_actions = [a <span class="code-highlight">for</span> a, q <span class="code-highlight">in</span> zip(valid_actions, q_vals) <span class="code-highlight">if</span> q == max_q]
    action = np.random.choice(best_actions)  <span class="code-comment"># åˆ©ç”¨</span></div>
                    </div>
                    <div class="tech-card">
                        <h3>ğŸ”„ æ›´æ–°æ©Ÿåˆ¶</h3>
                        <div class="code-section">
<span class="code-comment"># 3. Q-Learning æ›´æ–°</span>
next_valid_actions = get_valid_actions(current_map, next_pos)
next_qs = [q_table.get((next_pos[0], next_pos[1], a), <span class="code-number">0.0</span>) <span class="code-highlight">for</span> a <span class="code-highlight">in</span> next_valid_actions]
max_next_q = max(next_qs) <span class="code-highlight">if</span> next_qs <span class="code-highlight">else</span> <span class="code-number">0.0</span>

<span class="code-comment"># æ ¸å¿ƒæ›´æ–°å…¬å¼</span>
q_key = (state[0], state[1], action)
q_table[q_key] = q_table.get(q_key, <span class="code-number">0.0</span>) + learning_rate * (
    reward + discount_factor * max_next_q - q_table.get(q_key, <span class="code-number">0.0</span>)
)</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- å¹»ç‡ˆç‰‡ 6: SARSA æ ¸å¿ƒå…¬å¼ -->
        <div class="slide" data-slide="6">
            <div class="content">
                <h1 class="slide-title">ğŸ”„ SARSA æ ¸å¿ƒå…¬å¼</h1>
                <div class="algorithm-card">
                    <h3>SARSA æ›´æ–°å…¬å¼</h3>
                    <div class="formula">
                        Q(s,a) â† Q(s,a) + Î±[r + Î³Â·Q(s',a') - Q(s,a)]
                    </div>
                    <div class="implementation-detail">
                        <h4>ğŸ“ èˆ‡ Q-Learning çš„å·®ç•°</h4>
                        <ul>
                            <li><strong>åŒç­–ç•¥å­¸ç¿’</strong>ï¼šå­¸ç¿’ç•¶å‰åŸ·è¡Œçš„ç­–ç•¥</li>
                            <li><strong>å¯¦éš›å‹•ä½œ</strong>ï¼šä½¿ç”¨å¯¦éš›åŸ·è¡Œçš„ä¸‹ä¸€å‹•ä½œ Q(s',a')</li>
                            <li><strong>ä¿å®ˆç‰¹æ€§</strong>ï¼šåœ¨å±éšªç’°å¢ƒä¸­è¡¨ç¾æ›´ç©©å®š</li>
                            <li><strong>SARSA(Î»)</strong>ï¼šæ”¯æ´è³‡æ ¼è·¡æ©Ÿåˆ¶</li>
                        </ul>
                    </div>
                </div>
                <div class="code-section">
<span class="code-comment"># SARSA æ ¸å¿ƒæ›´æ–°å‡½æ•¸</span>
<span class="code-highlight">def</span> <span class="code-string">sarsa_update</span>(q_table, state, action, reward, next_state, next_action, learning_rate, discount_factor):
    <span class="code-comment">"""SARSA æ›´æ–°å‡½æ•¸"""</span>
    current_q = q_table.get((state, action), <span class="code-number">0.0</span>)
    next_q = q_table.get((next_state, next_action), <span class="code-number">0.0</span>)
    new_q = current_q + learning_rate * (reward + discount_factor * next_q - current_q)
    <span class="code-highlight">return</span> new_q</div>
            </div>
        </div>

        <!-- å¹»ç‡ˆç‰‡ 7: SARSA å¯¦ç¾ç´°ç¯€ -->
        <div class="slide" data-slide="7">
            <div class="content">
                <h1 class="slide-title">ğŸ”§ SARSA å¯¦ç¾ç´°ç¯€</h1>
                <div class="tech-grid">
                    <div class="tech-card">
                        <h3>ğŸ¯ SARSA æ ¸å¿ƒæ­¥é©Ÿ</h3>
                        <div class="code-section">
<span class="code-comment"># 1. é¸æ“‡åˆå§‹å‹•ä½œ</span>
valid_actions = get_valid_actions(current_map, state)
<span class="code-highlight">if</span> np.random.rand() < current_epsilon:
    action = np.random.choice(valid_actions)
<span class="code-highlight">else</span>:
    q_vals = [q_table.get((state[0], state[1], a), -np.inf) <span class="code-highlight">for</span> a <span class="code-highlight">in</span> valid_actions]
    max_q = np.max(q_vals)
    best_actions = [a <span class="code-highlight">for</span> a, q <span class="code-highlight">in</span> zip(valid_actions, q_vals) <span class="code-highlight">if</span> q == max_q]
    action = np.random.choice(best_actions)

<span class="code-comment"># 2. é¸æ“‡ä¸‹ä¸€å‹•ä½œï¼ˆSARSA ç‰¹æ€§ï¼‰</span>
next_valid_actions = get_valid_actions(current_map, next_pos)
<span class="code-highlight">if</span> next_valid_actions:
    <span class="code-highlight">if</span> np.random.rand() < current_epsilon:
        next_action = np.random.choice(next_valid_actions)
    <span class="code-highlight">else</span>:
        next_q_vals = [q_table.get((next_pos[0], next_pos[1], a), -np.inf) <span class="code-highlight">for</span> a <span class="code-highlight">in</span> next_valid_actions]
        max_next_q = np.max(next_q_vals)
        best_next_actions = [a <span class="code-highlight">for</span> a, q <span class="code-highlight">in</span> zip(next_valid_actions, next_q_vals) <span class="code-highlight">if</span> q == max_next_q]
        next_action = np.random.choice(best_next_actions)
    next_q = q_table.get((next_pos[0], next_pos[1], next_action), <span class="code-number">0.0</span>)
<span class="code-highlight">else</span>:
    next_action = None
    next_q = <span class="code-number">0.0</span></div>
                    </div>
                    <div class="tech-card">
                        <h3>ğŸ”„ SARSA(Î») è³‡æ ¼è·¡</h3>
                        <div class="code-section">
<span class="code-comment"># 3. SARSA(Î») è³‡æ ¼è·¡æ›´æ–°</span>
eligibility_traces = {}

<span class="code-comment"># æ›´æ–°ç•¶å‰ç‹€æ…‹-å‹•ä½œå°çš„è³‡æ ¼è·¡</span>
q_key = (state[0], state[1], action)
eligibility_traces[q_key] = eligibility_traces.get(q_key, <span class="code-number">0.0</span>) + <span class="code-number">1.0</span>

<span class="code-comment"># æ›´æ–°æ‰€æœ‰ç‹€æ…‹-å‹•ä½œå°çš„ Q å€¼å’Œè³‡æ ¼è·¡</span>
<span class="code-highlight">for</span> (s_i, s_j, a), trace <span class="code-highlight">in</span> eligibility_traces.items():
    <span class="code-highlight">if</span> trace > <span class="code-number">0</span>:
        q_table[(s_i, s_j, a)] = q_table.get((s_i, s_j, a), <span class="code-number">0.0</span>) + learning_rate * td_error * trace
        <span class="code-comment"># è¡°æ¸›è³‡æ ¼è·¡</span>
        eligibility_traces[(s_i, s_j, a)] = lambda_value * discount_factor * trace</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- å¹»ç‡ˆç‰‡ 8: æ¢ç´¢ç­–ç•¥å¯¦ç¾ -->
        <div class="slide" data-slide="8">
            <div class="content">
                <h1 class="slide-title">ğŸ¯ æ¢ç´¢ç­–ç•¥å¯¦ç¾</h1>
                <div class="tech-grid">
                    <div class="tech-card">
                        <h3>Îµ-greedy ç­–ç•¥</h3>
                        <div class="code-section">
<span class="code-comment"># æ¢ç´¢ç‡è¨ˆç®—ï¼ˆæŒ‡æ•¸è¡°æ¸›ï¼‰</span>
<span class="code-highlight">def</span> <span class="code-string">get_epsilon</span>(episode, total_episodes):
    <span class="code-comment">"""è¨ˆç®—ç•¶å‰æ¢ç´¢ç‡ï¼ˆæŒ‡æ•¸è¡°æ¸›ï¼‰"""</span>
    <span class="code-highlight">if</span> EPSILON_DECAY == <span class="code-number">1.0</span>:
        <span class="code-highlight">return</span> EPSILON_START
    
    <span class="code-comment"># æŒ‡æ•¸è¡°æ¸›</span>
    decay_rate = (EPSILON_END / EPSILON_START) ** (<span class="code-number">1</span> / total_episodes)
    epsilon = EPSILON_START * (decay_rate ** episode)
    <span class="code-highlight">return</span> max(epsilon, EPSILON_END)

<span class="code-comment"># å‹•ä½œé¸æ“‡</span>
current_epsilon = get_epsilon(episode, episodes)
<span class="code-highlight">if</span> np.random.rand() < current_epsilon:
    action = np.random.choice(valid_actions)  <span class="code-comment"># æ¢ç´¢</span>
<span class="code-highlight">else</span>:
    <span class="code-comment"># åˆ©ç”¨æœ€ä½³å‹•ä½œ</span>
    q_vals = [q_table.get((state[0], state[1], a), -np.inf) <span class="code-highlight">for</span> a <span class="code-highlight">in</span> valid_actions]
    max_q = np.max(q_vals)
    best_actions = [a <span class="code-highlight">for</span> a, q <span class="code-highlight">in</span> zip(valid_actions, q_vals) <span class="code-highlight">if</span> q == max_q]
    action = np.random.choice(best_actions)</div>
                    </div>
                    <div class="tech-card">
                        <h3>ğŸ›ï¸ æ¢ç´¢ç­–ç•¥ç‰¹æ€§</h3>
                        <ul class="module-list">
                            <li><strong>æŒ‡æ•¸è¡°æ¸›</strong> <span class="module-purpose">å¹³æ»‘éæ¸¡</span></li>
                            <li><strong>æ¢ç´¢ vs åˆ©ç”¨</strong> <span class="module-purpose">å¹³è¡¡å­¸ç¿’</span></li>
                            <li><strong>éš¨æ©Ÿé¸æ“‡</strong> <span class="module-purpose">é¿å…å±€éƒ¨æœ€å„ª</span></li>
                            <li><strong>æœ€ä½³å‹•ä½œ</strong> <span class="module-purpose">åˆ©ç”¨å·²çŸ¥çŸ¥è­˜</span></li>
                        </ul>
                        <div class="implementation-detail">
                            <h4>ğŸ“Š æ¢ç´¢ç‡è®ŠåŒ–</h4>
                            <p>å¾ 1.0ï¼ˆå®Œå…¨æ¢ç´¢ï¼‰â†’ 0.01ï¼ˆä¸»è¦åˆ©ç”¨ï¼‰</p>
                            <p>ç¢ºä¿è¨“ç·´åˆæœŸå……åˆ†æ¢ç´¢ç’°å¢ƒï¼Œå¾ŒæœŸè¶¨å‘æœ€å„ªç­–ç•¥</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- å¹»ç‡ˆç‰‡ 9: è³‡æ–™è™•ç†èˆ‡è¼¸å‡º -->
        <div class="slide" data-slide="9">
            <div class="content">
                <h1 class="slide-title">ğŸ“Š è³‡æ–™è™•ç†èˆ‡è¼¸å‡º</h1>
                <div class="tech-grid">
                    <div class="tech-card">
                        <h3>ğŸ’¾ è¨“ç·´è¨˜éŒ„</h3>
                        <div class="code-section">
<span class="code-comment"># è¨˜éŒ„æ¯æ­¥çš„è¨“ç·´è³‡æ–™</span>
log_records.append({
    <span class="code-string">'episode'</span>: episode,
    <span class="code-string">'step'</span>: step,
    <span class="code-string">'state'</span>: state_to_str(state),
    <span class="code-string">'action'</span>: action,
    <span class="code-string">'reward'</span>: reward,
    <span class="code-string">'next_state'</span>: state_to_str(next_pos),
    <span class="code-string">'done'</span>: is_terminal(cell),
    <span class="code-string">'epsilon'</span>: current_epsilon,
    <span class="code-string">'success'</span>: cell == GOAL
})

<span class="code-comment"># è¼¸å‡º Q-Table</span>
qtable_rows = []
<span class="code-highlight">for</span> (i, j, action), value <span class="code-highlight">in</span> q_table.items():
    qtable_rows.append({
        <span class="code-string">'state'</span>: state_to_str((i, j)), 
        <span class="code-string">'action'</span>: action, 
        <span class="code-string">'value'</span>: value
    })</div>
                    </div>
                    <div class="tech-card">
                        <h3>ğŸ“ æª”æ¡ˆè¼¸å‡º</h3>
                        <div class="code-section">
<span class="code-comment"># ä½¿ç”¨ Pandas è¼¸å‡º CSV</span>
qtable_output = os.path.join(output_dir, <span class="code-string">'q_table.csv'</span>)
log_output = os.path.join(output_dir, <span class="code-string">'log.csv'</span>)

pd.DataFrame(qtable_rows).to_csv(qtable_output, index=False)
pd.DataFrame(log_records).to_csv(log_output, index=False)

<span class="code-comment"># è¨“ç·´çµ±è¨ˆ</span>
final_avg_reward = np.mean(episode_rewards[-100:]) <span class="code-highlight">if</span> len(episode_rewards) >= <span class="code-number">100</span> <span class="code-highlight">else</span> np.mean(episode_rewards)
print(f<span class="code-string">"æœ€çµ‚ 100 å›åˆå¹³å‡çå‹µ: {final_avg_reward:.2f}"</span>)</div>
                    </div>
                </div>
                <div class="implementation-detail">
                    <h4>ğŸ” è³‡æ–™çµæ§‹è¨­è¨ˆ</h4>
                    <p><strong>Q-Table</strong>ï¼šä½¿ç”¨å­—å…¸çµæ§‹ (state, action) â†’ valueï¼Œä¾¿æ–¼å¿«é€ŸæŸ¥è©¢</p>
                    <p><strong>è¨“ç·´è¨˜éŒ„</strong>ï¼šè©³ç´°è¨˜éŒ„æ¯æ­¥çš„ç‹€æ…‹ã€å‹•ä½œã€çå‹µï¼Œç”¨æ–¼å¾ŒçºŒåˆ†æ</p>
                    <p><strong>CSV è¼¸å‡º</strong>ï¼šä½¿ç”¨ Pandas ç¢ºä¿è³‡æ–™æ ¼å¼æ¨™æº–åŒ–ï¼Œä¾¿æ–¼å…¶ä»–å·¥å…·åˆ†æ</p>
                </div>
            </div>
        </div>

        <!-- å¹»ç‡ˆç‰‡ 10: æ¼”ç®—æ³•æ¯”è¼ƒç¸½çµ -->
        <div class="slide" data-slide="10">
            <div class="content">
                <h1 class="slide-title">ğŸ“‹ æ¼”ç®—æ³•æ¯”è¼ƒç¸½çµ</h1>
                <div class="algorithm-comparison">
                    <div class="algorithm-card">
                        <h3>ğŸ§® Q-Learning</h3>
                        <div class="formula">
                            Q(s,a) â† Q(s,a) + Î±[r + Î³Â·max(Q(s',a')) - Q(s,a)]
                        </div>
                        <ul class="module-list">
                            <li><strong>å­¸ç¿’é¡å‹</strong> <span class="module-purpose">é›¢ç­–ç•¥</span></li>
                            <li><strong>æ›´æ–°ç›®æ¨™</strong> <span class="module-purpose">æœ€å„ªå‹•ä½œ</span></li>
                            <li><strong>æ”¶æ–‚é€Ÿåº¦</strong> <span class="module-purpose">è¼ƒå¿«</span></li>
                            <li><strong>é©ç”¨å ´æ™¯</strong> <span class="module-purpose">è¿½æ±‚æœ€å„ª</span></li>
                        </ul>
                    </div>
                    <div class="algorithm-card">
                        <h3>ğŸ”„ SARSA</h3>
                        <div class="formula">
                            Q(s,a) â† Q(s,a) + Î±[r + Î³Â·Q(s',a') - Q(s,a)]
                        </div>
                        <ul class="module-list">
                            <li><strong>å­¸ç¿’é¡å‹</strong> <span class="module-purpose">åŒç­–ç•¥</span></li>
                            <li><strong>æ›´æ–°ç›®æ¨™</strong> <span class="module-purpose">å¯¦éš›å‹•ä½œ</span></li>
                            <li><strong>æ”¶æ–‚é€Ÿåº¦</strong> <span class="module-purpose">è¼ƒæ…¢</span></li>
                            <li><strong>é©ç”¨å ´æ™¯</strong> <span class="module-purpose">ä¿å®ˆç©©å®š</span></li>
                        </ul>
                    </div>
                </div>
                <div class="implementation-detail">
                    <h4>ğŸ¯ æŠ€è¡“å¯¦ç¾è¦é»</h4>
                    <p><strong>æ¨¡çµ„åŒ–è¨­è¨ˆ</strong>ï¼šæ ¸å¿ƒå‡½æ•¸ç¨ç«‹ï¼Œä¾¿æ–¼ç¶­è­·å’Œæ“´å±•</p>
                    <p><strong>åƒæ•¸åŒ–é…ç½®</strong>ï¼šæ‰€æœ‰è¶…åƒæ•¸å¯èª¿æ•´ï¼Œæ”¯æ´å¯¦é©—å°æ¯”</p>
                    <p><strong>å®Œæ•´è¨˜éŒ„</strong>ï¼šè©³ç´°çš„è¨“ç·´éç¨‹è¨˜éŒ„ï¼Œä¾¿æ–¼åˆ†æå’Œèª¿å„ª</p>
                    <p><strong>å¯é‡ç¾æ€§</strong>ï¼šéš¨æ©Ÿç¨®å­è¨­å®šï¼Œç¢ºä¿å¯¦é©—çµæœå¯é‡ç¾</p>
                </div>
            </div>
        </div>

        <!-- å°èˆªæŒ‰éˆ• -->
        <div class="navigation">
            <button class="nav-btn" onclick="previousSlide()">â† ä¸Šä¸€é </button>
            <button class="nav-btn" onclick="nextSlide()">ä¸‹ä¸€é  â†’</button>
        </div>
    </div>

    <script>
        let currentSlide = 1;
        const totalSlides = 10;

        function showSlide(slideNumber) {
            // éš±è—æ‰€æœ‰å¹»ç‡ˆç‰‡
            document.querySelectorAll('.slide').forEach(slide => {
                slide.classList.remove('active');
            });

            // é¡¯ç¤ºç•¶å‰å¹»ç‡ˆç‰‡
            const currentSlideElement = document.querySelector(`[data-slide="${slideNumber}"]`);
            if (currentSlideElement) {
                currentSlideElement.classList.add('active');
            }

            // æ›´æ–°è¨ˆæ•¸å™¨
            document.getElementById('current-slide').textContent = slideNumber;
            document.getElementById('total-slides').textContent = totalSlides;

            // æ›´æ–°é€²åº¦æ¢
            const progress = (slideNumber / totalSlides) * 100;
            document.querySelector('.progress-fill').style.width = progress + '%';
        }

        function nextSlide() {
            if (currentSlide < totalSlides) {
                currentSlide++;
                showSlide(currentSlide);
            }
        }

        function previousSlide() {
            if (currentSlide > 1) {
                currentSlide--;
                showSlide(currentSlide);
            }
        }

        // éµç›¤å°èˆª
        document.addEventListener('keydown', function(event) {
            if (event.key === 'ArrowRight' || event.key === ' ') {
                nextSlide();
            } else if (event.key === 'ArrowLeft') {
                previousSlide();
            }
        });

        // è§¸æ§å°èˆª
        let touchStartX = 0;
        let touchEndX = 0;

        document.addEventListener('touchstart', function(event) {
            touchStartX = event.changedTouches[0].screenX;
        });

        document.addEventListener('touchend', function(event) {
            touchEndX = event.changedTouches[0].screenX;
            handleSwipe();
        });

        function handleSwipe() {
            const swipeThreshold = 50;
            const diff = touchStartX - touchEndX;

            if (Math.abs(diff) > swipeThreshold) {
                if (diff > 0) {
                    nextSlide();
                } else {
                    previousSlide();
                }
            }
        }

        // åˆå§‹åŒ–
        showSlide(1);

        // æ·»åŠ é€²åº¦æ¢
        const progressBar = document.createElement('div');
        progressBar.className = 'progress-bar';
        progressBar.innerHTML = '<div class="progress-fill"></div>';
        document.querySelector('.presentation-container').appendChild(progressBar);
    </script>
</body>
</html> 